"use strict";(self["webpackChunkadmin_one_vue_tailwind"]=self["webpackChunkadmin_one_vue_tailwind"]||[]).push([[221],{9443:function(e,l,t){t.d(l,{r:function(){return n}});t(7658);function n(e,l){return e.reduce((function(e,t){return(e[t[l]]=e[t[l]]||[]).push(t),e}),{})}},5690:function(e,l,t){t.d(l,{Z:function(){return d}});t(7658);var n=t(6252),a=t(3577),u=t(2262);const i={class:"mb-6 last:mb-0"},s={key:0,class:"block font-bold mb-2"},o={key:1,class:"text-xs text-red-500 dark:text-red-400 mt-1"};var r={__name:"Field",props:{label:{type:String,default:null},help:{type:String,default:null}},setup(e){const l=(0,n.Rr)(),t=(0,n.Fl)((()=>{const e=[],t=l.default().length;return t>1&&e.push("grid grid-cols-1 gap-3"),2===t&&e.push("md:grid-cols-2"),e}));return(l,r)=>((0,n.wg)(),(0,n.iD)("div",i,[e.label?((0,n.wg)(),(0,n.iD)("label",s,(0,a.zw)(e.label),1)):(0,n.kq)("",!0),(0,n._)("div",{class:(0,a.C_)((0,u.SU)(t))},[(0,n.WI)(l.$slots,"default")],2),e.help?((0,n.wg)(),(0,n.iD)("div",o,(0,a.zw)(e.help[0].message),1)):(0,n.kq)("",!0)]))}};const c=r;var d=c},3221:function(e,l,t){t.r(l),t.d(l,{default:function(){return _}});t(7658);var n=t(6252),a=t(2262),u=t(9963),i=t(3577),s=t(5317),o=t(7315),r=t(9890),c=t(5690),d=t(2213),m=t(5693),p=t(1388),v=t(6373),f=t(7877),g=t(3002),h=t(9443);const b={key:0,class:"bg-opacity-50 p-3 dark:bg-gray-800"};var w={__name:"CreateMessage",setup(e){const l=(0,a.iH)([]),t=(0,a.iH)({}),w=(0,g.pm)(),k=(0,a.iH)(null),_=(0,a.iH)([]),y=(0,a.iH)({}),Z=(0,a.iH)([]),W=(0,a.qj)({recipients:null,content:"",title:""});function C(){_.value=[],Z.value=[],W.message="",W.title="",k.value.setHTML("")}function H(){const e=_.value.find((e=>e===y.value.id));e||(_.value.push(y.value.id),Z.value.push({id:y.value.id,name:y.value.label}))}function x(e){_.value=D(_.value,e),Z.value=D(Z.value,e)}function D(e,l){const t=[];return e.forEach((e=>{e!==l&&e.id!==l&&t.push(e)})),t}async function S(){try{const{data:e}=await f.Z.get("/users");e.forEach((e=>{l.value.push({id:e.id,label:e.fullName})}))}catch(e){w.error(e.message)}}function U(){t.value={}}(0,n.bv)((async()=>{await S()}));const M=async()=>{try{U(),W.recipients=_;const{message:e}=await f.Z.post("/messages",W);w.success(e),C()}catch(e){e.errors?t.value=(0,h.r)(e.errors,"field"):w.error(e.detail)}};return(e,f)=>{const g=(0,n.up)("QuillEditor");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(o.Z,null,{default:(0,n.w5)((()=>[(0,n.Wm)(r.Z,{title:"Create Message",icon:(0,a.SU)(s.hjO),form:"",onSubmit:(0,u.iM)(M,["prevent"])},{default:(0,n.w5)((()=>[(0,n.Wm)(c.Z,{label:"Recipient",help:t.value.recipients},{default:(0,n.w5)((()=>[(0,n.Wm)(d.Z,{modelValue:y.value,"onUpdate:modelValue":f[0]||(f[0]=e=>y.value=e),options:l.value,onChange:H},null,8,["modelValue","options"])])),_:1},8,["help"]),Z.value.length?((0,n.wg)(),(0,n.iD)("div",b,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(Z.value,((e,l)=>((0,n.wg)(),(0,n.iD)("span",{key:l,class:"inline-block px-2 py-1 rounded-sm mr-2 text-sm dark:bg-gray-700 light:bg-gray-300"},[(0,n.Uk)((0,i.zw)(e.name)+" ",1),(0,n._)("span",null,[(0,n.Wm)(p.Z,{class:"inline-block bg-red-700 p-1 rounded-sm mr-2 text-white-700",onClick:l=>x(e.id)},{default:(0,n.w5)((()=>[(0,n.Uk)("X")])),_:2},1032,["onClick"])])])))),128))])):(0,n.kq)("",!0),(0,n.Wm)(m.Z),(0,n.Wm)(c.Z,{label:"Message Title",help:t.value.title},{default:(0,n.w5)((()=>[(0,n.Wm)(d.Z,{modelValue:W.title,"onUpdate:modelValue":f[1]||(f[1]=e=>W.title=e)},null,8,["modelValue"])])),_:1},8,["help"]),(0,n.Wm)(m.Z),(0,n.Wm)(c.Z,{label:"Message Content",help:t.value.content},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{ref_key:"editor",ref:k,content:W.content,"onUpdate:content":f[2]||(f[2]=e=>W.content=e),theme:"snow","content-type":"html",toolbar:"full"},null,8,["content"])])),_:1},8,["help"]),(0,n.Wm)(m.Z),(0,n.Wm)(v.Z,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p.Z,{type:"submit",color:"info",label:"Send"})])),_:1})])),_:1},8,["icon","onSubmit"])])),_:1})])}}};const k=w;var _=k}}]);
//# sourceMappingURL=221.688bc90a.js.map