"use strict";(self["webpackChunkadmin_one_vue_tailwind"]=self["webpackChunkadmin_one_vue_tailwind"]||[]).push([[974],{5690:function(e,t,a){a.d(t,{Z:function(){return m}});a(7658);var l=a(6252),n=a(3577),i=a(2262);const s={class:"mb-6 last:mb-0"},c={key:0,class:"block font-bold mb-2"},o={key:1,class:"text-xs text-red-500 dark:text-red-400 mt-1"};var u={__name:"Field",props:{label:{type:String,default:null},help:{type:String,default:null}},setup(e){const t=(0,l.Rr)(),a=(0,l.Fl)((()=>{const e=[],a=t.default().length;return a>1&&e.push("grid grid-cols-1 gap-3"),2===a&&e.push("md:grid-cols-2"),e}));return(t,u)=>((0,l.wg)(),(0,l.iD)("div",s,[e.label?((0,l.wg)(),(0,l.iD)("label",c,(0,n.zw)(e.label),1)):(0,l.kq)("",!0),(0,l._)("div",{class:(0,n.C_)((0,i.SU)(a))},[(0,l.WI)(t.$slots,"default")],2),e.help?((0,l.wg)(),(0,l.iD)("div",o,(0,n.zw)(e.help[0].message),1)):(0,l.kq)("",!0)]))}};const r=u;var m=r},974:function(e,t,a){a.r(t),a.d(t,{default:function(){return Z}});var l=a(6252),n=a(2262),i=a(3577),s=a(5317),c=a(7315),o=a(9890),u=a(5690),r=a(5693),m=a(7877),d=a(3002),f=a(2201),w=a(6373),g=a(1388),p=a(2213),h={__name:"SelfMemoAttachments",setup(e){const t=(0,f.yj)(),a=(0,n.iH)({}),h=(0,n.iH)([]),v=(0,n.iH)([]),Z=(0,d.pm)(),k=(0,n.qj)({file:null}),b=(0,n.iH)(t.params.memoId);function y(e){k.file=e.target.files||e.dataTransfer.files}async function _(){try{if(null===k.file)return;const e=new FormData;e.append("file",k.file[0]);const{message:t}=await m.Z.post(`/memos/${b.value}/attachments`,e);await C(t),Z.success(t),await C(b.value)}catch(e){Z.error(e.message)}}async function W(e){try{const{data:t}=await m.Z.get(`/memos/${e}`);a.value=t}catch(t){Z.error(t.detail)}}function D(e){window.open(e)}async function C(e){try{const{data:t}=await m.Z.get(`/memos/${e}/attachments`);v.value=t}catch(t){Z.error(t.message)}}async function S(e){try{const{message:t}=await m.Z["delete"](`/memos/${b.value}/attachments/${e}`);await C(b.value),Z.success(t)}catch(t){Z.error(t.message)}}return(0,l.bv)((async()=>{await W(b.value),await C(b.value)})),(e,t)=>((0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(c.Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(o.Z,{title:"Memo Details",icon:(0,n.SU)(s.hjO)},{default:(0,l.w5)((()=>[h.value.length?((0,l.wg)(),(0,l.j4)(u.Z,{key:0,label:"Recipients"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(h.value,(e=>((0,l.wg)(),(0,l.iD)("span",{key:e.recipient,class:"inline-block px-2 py-1"},(0,i.zw)(e.user.fullName),1)))),128))])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(r.Z),(0,l.Wm)(u.Z,{label:"Memo Title"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(a.value.title),1)])),_:1}),(0,l.Wm)(r.Z),(0,l.Wm)(u.Z,{label:"Date"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(a.value.date),1)])),_:1}),(0,l.Wm)(r.Z),(0,l.Wm)(u.Z,{label:"Attachments"},{default:(0,l.w5)((()=>[(0,l.Wm)(p.Z,{type:"file",placeholder:"Enter the name of document",onChange:y})])),_:1}),(0,l.Wm)(u.Z,{label:"Attached Files"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(v.value,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e.id},[(0,l.Wm)(w.Z,{class:"justify-start lg:justify-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(g.Z,{color:"info",icon:(0,n.SU)(s.rgx),label:"View Attachment",onClick:t=>D(e.url)},null,8,["icon","onClick"]),(0,l.Wm)(g.Z,{color:"danger",icon:(0,n.SU)(s.QGK),label:"Delete Attachments",onClick:t=>S(e.id)},null,8,["icon","onClick"])])),_:2},1024)])))),128))])),_:1}),(0,l.Wm)(r.Z),(0,l.Wm)(r.Z),(0,l.Wm)(w.Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g.Z,{color:"info",label:"Send",onClick:_})])),_:1})])),_:1},8,["icon"])])),_:1})]))}};const v=h;var Z=v}}]);
//# sourceMappingURL=974.43defca0.js.map