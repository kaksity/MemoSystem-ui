"use strict";(self["webpackChunkadmin_one_vue_tailwind"]=self["webpackChunkadmin_one_vue_tailwind"]||[]).push([[124],{9443:function(e,t,l){l.d(t,{r:function(){return n}});l(7658);function n(e,t){return e.reduce((function(e,l){return(e[l[t]]=e[l[t]]||[]).push(l),e}),{})}},5690:function(e,t,l){l.d(t,{Z:function(){return c}});l(7658);var n=l(6252),a=l(3577),u=l(2262);const i={class:"mb-6 last:mb-0"},o={key:0,class:"block font-bold mb-2"},r={key:1,class:"text-xs text-red-500 dark:text-red-400 mt-1"};var d={__name:"Field",props:{label:{type:String,default:null},help:{type:String,default:null}},setup(e){const t=(0,n.Rr)(),l=(0,n.Fl)((()=>{const e=[],l=t.default().length;return l>1&&e.push("grid grid-cols-1 gap-3"),2===l&&e.push("md:grid-cols-2"),e}));return(t,d)=>((0,n.wg)(),(0,n.iD)("div",i,[e.label?((0,n.wg)(),(0,n.iD)("label",o,(0,a.zw)(e.label),1)):(0,n.kq)("",!0),(0,n._)("div",{class:(0,a.C_)((0,u.SU)(l))},[(0,n.WI)(t.$slots,"default")],2),e.help?((0,n.wg)(),(0,n.iD)("div",r,(0,a.zw)(e.help[0].message),1)):(0,n.kq)("",!0)]))}};const s=d;var c=s},1124:function(e,t,l){l.r(t),l.d(t,{default:function(){return _}});l(7658);var n=l(6252),a=l(2262),u=l(9963),i=l(3577),o=l(5317),r=l(7315),d=l(9890),s=l(5690),c=l(2213),p=l(5693),m=l(1388),f=l(6373),v=l(7877),h=l(3002),b=l(9443);const g={key:0,class:"bg-opacity-50 p-3 dark:bg-gray-800"};var w={__name:"CreateMemo",setup(e){const t=(0,a.iH)([]),l=(0,h.pm)(),w=(0,a.iH)({}),k=(0,a.iH)(null),_=(0,a.iH)([]),y=(0,a.iH)({}),W=(0,a.iH)([]),Z=(0,a.qj)({recipients:null,content:"",title:"",date:""});function C(){_.value=[],Z.content="",Z.date="",Z.title="",k.value.setHTML("")}function D(){const e=_.value.find((e=>e===y.value.id));e||(_.value.push(y.value.id),W.value.push({id:y.value.id,name:y.value.label}))}function S(e){_.value=H(_.value,e),W.value=H(W.value,e)}async function V(){try{const{data:e}=await v.Z.get("/users");e.forEach((e=>{t.value.push({id:e.id,label:e.fullName})}))}catch(e){l.error(e.detail)}}function H(e,t){const l=[];return e.forEach((e=>{e!==t&&e.id!==t&&l.push(e)})),l}function U(){w.value={}}function x(e){return new Date(e).toISOString().split("T")[0]}(0,n.bv)((async()=>{await V()}));const M=async()=>{try{U();const{message:e}=await v.Z.post("/memos",{recipients:_.value,content:Z.content,title:Z.title,date:x(Z.date)});l.success(e),C()}catch(e){e.errors?w.value=(0,b.r)(e.errors,"field"):l.error(e.detail)}};return(e,l)=>{const v=(0,n.up)("JButton"),h=(0,n.up)("datepicker"),b=(0,n.up)("QuillEditor");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(r.Z,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d.Z,{title:"Create Memo",icon:(0,a.SU)(o.hjO),form:"",onSubmit:(0,u.iM)(M,["prevent"])},{default:(0,n.w5)((()=>[(0,n.Wm)(s.Z,{label:"Recipient",help:w.value.recipients},{default:(0,n.w5)((()=>[(0,n.Wm)(c.Z,{modelValue:y.value,"onUpdate:modelValue":l[0]||(l[0]=e=>y.value=e),options:t.value,onChange:D},null,8,["modelValue","options"])])),_:1},8,["help"]),_.value.length?((0,n.wg)(),(0,n.iD)("div",g,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(W.value,(e=>((0,n.wg)(),(0,n.iD)("span",{key:e.recipient,class:"inline-block px-2 py-1 rounded-sm mr-2 text-sm dark:bg-gray-700 light:bg-gray-300"},[(0,n.Uk)((0,i.zw)(e.name)+" ",1),(0,n._)("span",null,[(0,n.Wm)(v,{class:"inline-block bg-red-700 p-1 rounded-sm mr-2 text-white-700",onClick:t=>S(e.id)},{default:(0,n.w5)((()=>[(0,n.Uk)("X")])),_:2},1032,["onClick"])])])))),128))])):(0,n.kq)("",!0),(0,n.Wm)(p.Z),(0,n.Wm)(s.Z,{label:"Memo Title",help:w.value.title},{default:(0,n.w5)((()=>[(0,n.Wm)(c.Z,{modelValue:Z.title,"onUpdate:modelValue":l[1]||(l[1]=e=>Z.title=e)},null,8,["modelValue"])])),_:1},8,["help"]),(0,n.Wm)(p.Z),(0,n.Wm)(s.Z,{label:"Date",help:w.value.date},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{modelValue:Z.date,"onUpdate:modelValue":l[2]||(l[2]=e=>Z.date=e),"auto-apply":"","alt-position":""},null,8,["modelValue"])])),_:1},8,["help"]),(0,n.Wm)(p.Z),(0,n.Wm)(s.Z,{label:"Memo Content",help:w.value.content},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{ref_key:"editor",ref:k,content:Z.content,"onUpdate:content":l[3]||(l[3]=e=>Z.content=e),theme:"snow","content-type":"html",toolbar:"full"},null,8,["content"])])),_:1},8,["help"]),(0,n.Wm)(p.Z),(0,n.Wm)(f.Z,null,{default:(0,n.w5)((()=>[(0,n.Wm)(m.Z,{type:"submit",color:"info",label:"Send"})])),_:1})])),_:1},8,["icon","onSubmit"])])),_:1})])}}};const k=w;var _=k}}]);
//# sourceMappingURL=124.2ab32ab6.js.map