"use strict";(self["webpackChunkadmin_one_vue_tailwind"]=self["webpackChunkadmin_one_vue_tailwind"]||[]).push([[387],{5690:function(e,a,t){t.d(a,{Z:function(){return r}});var l=t(6252),n=t(3577),s=t(2262);const i={class:"mb-6 last:mb-0"},o={key:0,class:"block font-bold mb-2"},c={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"};var u={props:{label:{type:String,default:null},help:{type:String,default:null}},setup(e){const a=(0,l.Rr)(),t=(0,l.Fl)((()=>{const e=[],t=a.default().length;return t>1&&e.push("grid grid-cols-1 gap-3"),2===t&&e.push("md:grid-cols-2"),e}));return(a,u)=>((0,l.wg)(),(0,l.iD)("div",i,[e.label?((0,l.wg)(),(0,l.iD)("label",o,(0,n.zw)(e.label),1)):(0,l.kq)("",!0),(0,l._)("div",{class:(0,n.C_)((0,s.SU)(t))},[(0,l.WI)(a.$slots,"default")],2),e.help?((0,l.wg)(),(0,l.iD)("div",c,(0,n.zw)(e.help),1)):(0,l.kq)("",!0)]))}};const m=u;var r=m},3523:function(e,a,t){t.r(a),t.d(a,{default:function(){return D}});var l=t(6252),n=t(2262),s=t(3577),i=t(5317),o=t(7315),c=t(9890),u=t(5693),m=t(8400),r=t(3002),d=t(2119),p=t(5690),g=t(2213),w=t(1388),v=t(6373);const f={class:"px-2 py-1"},y={class:""},b={class:"text-sm"},k=(0,l.Uk)(),h=["onClick"],Z={class:"text-gray-500"},_={key:1,class:"bg-opacity-50 p-3 dark:bg-gray-800"},W=["onClick"];var x={setup(e){const a=(0,d.yj)(),t=(0,n.iH)({}),x=(0,n.iH)([]),C=(0,n.iH)([]),D=(0,n.iH)([]),U=(0,n.iH)([]),H=(0,n.iH)({}),z=(0,r.pm)(),S=(0,n.iH)(a.params.memoId),q=(0,n.qj)({comment:"",receipients:null});function V(){const e=D.value.find((e=>e.receipient===H.value.id));e||D.value.push({receipient:H.value.id,name:H.value.label})}function $(e){const a=[];D.value.forEach((t=>{t.receipient!==e&&a.push(t)})),D.value=a}async function j(e){try{const a=await m.Z.get(`/memos/${e}/receipients`);x.value=a.data.receipients}catch(a){z.error(a.message)}}async function Y(e){try{const a=await m.Z.get(`/memos/${e}`);t.value=a.data.memo}catch(a){z.error(a.message)}}async function K(){try{const e=await m.Z.get("/users");e.data.forEach((e=>{C.value.push({id:e.id,label:e.fullName})}))}catch(e){z.error(e.message)}}async function M(){if(0!==D.value.length)if(""!==q.comment)try{q.receipients=D;const e=await m.Z.post(`/memos/${S.value}/comments`,q);z.success(e.message),await N(),I()}catch(e){z.error(e.message)}else z.error("Comment is required");else z.error("You must select at least 1 receipient")}async function R(e){try{const a=await m.Z.get(`/memos/${e}/comments`);U.value=a.data.memoComments}catch(a){z.error(a.message)}}async function E(e){try{const a=await m.Z["delete"](`/memos/comments/${e}`);z.success(a.message),await R(S.value)}catch(a){z.error(a.message)}}function I(){q.comment="",D.value=[]}async function N(){await Y(S.value),await R(S.value),await j(S.value)}return(0,l.bv)((async()=>{await N(),K()})),(e,a)=>((0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(o.Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c.Z,{title:"Memo Details",icon:(0,n.SU)(i.hjO),form:""},{default:(0,l.w5)((()=>[x.value.length?((0,l.wg)(),(0,l.j4)(p.Z,{key:0,label:"Recipients"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(x.value,(e=>((0,l.wg)(),(0,l.iD)("span",{key:e.receipient,class:"inline-block px-2 py-1"},(0,s.zw)(e.user.fullName),1)))),128))])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(u.Z),(0,l.Wm)(p.Z,{label:"Memo Title"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(t.value.title),1)])),_:1}),(0,l.Wm)(u.Z),(0,l.Wm)(p.Z,{label:"Date"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(t.value.date),1)])),_:1}),(0,l.Wm)(u.Z),(0,l.Wm)(p.Z,{label:"Memo Comments"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(U.value,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e.id},[(0,l._)("div",f,[(0,l._)("div",y,[(0,l.Uk)((0,s.zw)(e.commentBy)+" on ",1),(0,l._)("span",b,(0,s.zw)(e.date),1),k,(0,l._)("button",{class:"inline-block bg-red-700 p-2 rounded-sm mr-2 text-white-700",onClick:a=>E(e.id)}," X ",8,h)]),(0,l._)("div",Z,(0,s.zw)(e.message),1)])])))),128))])),_:1}),(0,l.Wm)(u.Z),(0,l.Wm)(p.Z,{label:"Receipient"},{default:(0,l.w5)((()=>[(0,l.Wm)(g.Z,{modelValue:H.value,"onUpdate:modelValue":a[0]||(a[0]=e=>H.value=e),options:C.value,onChange:V},null,8,["modelValue","options"])])),_:1}),D.value.length?((0,l.wg)(),(0,l.iD)("div",_,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(D.value,(e=>((0,l.wg)(),(0,l.iD)("span",{key:e.receipient,class:"inline-block px-2 py-1 rounded-sm mr-2 text-sm dark:bg-gray-700 light:bg-gray-300"},[(0,l.Uk)((0,s.zw)(e.name)+" ",1),(0,l._)("span",null,[(0,l._)("button",{class:"inline-block bg-red-700 p-1 rounded-sm mr-2 text-white-700",onClick:a=>$(e.receipient)},"X",8,W)])])))),128))])):(0,l.kq)("",!0),(0,l.Wm)(u.Z),(0,l.Wm)(p.Z,{label:"Comment"},{default:(0,l.w5)((()=>[(0,l.Wm)(g.Z,{modelValue:(0,n.SU)(q).comment,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,n.SU)(q).comment=e),row:"3",type:"textarea"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(u.Z),(0,l.Wm)(v.Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w.Z,{type:"submit",color:"info",label:"Send",onClick:M})])),_:1})])),_:1},8,["icon"])])),_:1})]))}};const C=x;var D=C}}]);
//# sourceMappingURL=387.f7f4a465.js.map