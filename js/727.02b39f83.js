"use strict";(self["webpackChunkadmin_one_vue_tailwind"]=self["webpackChunkadmin_one_vue_tailwind"]||[]).push([[727],{5690:function(e,t,l){l.d(t,{Z:function(){return d}});var a=l(6252),n=l(3577),i=l(2262);const o={class:"mb-6 last:mb-0"},u={key:0,class:"block font-bold mb-2"},r={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"};var s={props:{label:{type:String,default:null},help:{type:String,default:null}},setup(e){const t=(0,a.Rr)(),l=(0,a.Fl)((()=>{const e=[],l=t.default().length;return l>1&&e.push("grid grid-cols-1 gap-3"),2===l&&e.push("md:grid-cols-2"),e}));return(t,s)=>((0,a.wg)(),(0,a.iD)("div",o,[e.label?((0,a.wg)(),(0,a.iD)("label",u,(0,n.zw)(e.label),1)):(0,a.kq)("",!0),(0,a._)("div",{class:(0,n.C_)((0,i.SU)(l))},[(0,a.WI)(t.$slots,"default")],2),e.help?((0,a.wg)(),(0,a.iD)("div",r,(0,n.zw)(e.help),1)):(0,a.kq)("",!0)]))}};const c=s;var d=c},7318:function(e,t,l){l.r(t),l.d(t,{default:function(){return Z}});var a=l(6252),n=l(2262),i=l(9963),o=l(3577),u=l(5317),r=l(7315),s=l(9890),c=l(5690),d=l(2213),m=l(5693),p=l(1388),v=l(6373),f=l(8400),g=l(3002),w=l(2119);const b={key:0,class:"bg-opacity-50 p-3 dark:bg-gray-800"},y=["onClick"];var h={setup(e){const t=(0,w.yj)(),l=(0,n.iH)([]),h=(0,n.iH)(null),k=(0,g.pm)(),Z=(0,n.iH)({}),_=(0,n.iH)(t.params.memoId),W=(0,n.iH)([]),S=(0,n.iH)({}),U=(0,n.qj)({receipients:null,content:"",title:"",date:(new Date).toString()});async function D(e){try{const t=await f.Z.get(`/memos/${e}/receipients`);W.value=t.data.receipients,W.value=W.value.map((e=>({receipient:e.user.id,name:e.user.fullName})))}catch(t){k.error(t.message)}}async function H(e){try{const t=await f.Z.get(`/memos/${e}`);Z.value=t.data.memo,U.title=Z.value.title,U.date=Z.value.date,U.content=Z.value.content,h.value.setHTML(U.content)}catch(t){k.error(t.message)}}function V(){W.value=[],U.content="",U.date=(new Date).toString(),U.title="",h.value.setHTML(U.content)}function C(){const e=W.value.find((e=>e.receipient===S.value.id));e||W.value.push({receipient:S.value.id,name:S.value.label})}function M(e){const t=[];W.value.forEach((l=>{l.receipient!==e&&t.push(l)})),W.value=t}async function x(){try{const e=await f.Z.get("/users");e.data.forEach((e=>{l.value.push({id:e.id,label:e.fullName})}))}catch(e){k.error(e.message)}}(0,a.bv)((async()=>{await x(),await H(_.value),await D(_.value)}));const q=async()=>{try{if(0===W.value.length)return void k.error("You must select atleast 1 receipient");if(""===U.title)return void k.error("Memo Title is required");if(""===U.content)return void k.error("Memo Content is required");U.receipients=W;const e=await f.Z.put(`/memos/${_.value}`,U);k.success(e.message),V()}catch(e){k.error(e.message)}};return(e,t)=>{const f=(0,a.up)("datepicker"),g=(0,a.up)("QuillEditor");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(r.Z,null,{default:(0,a.w5)((()=>[(0,a.Wm)(s.Z,{title:"Edit Memo",icon:(0,n.SU)(u.hjO),form:"",onSubmit:(0,i.iM)(q,["prevent"])},{default:(0,a.w5)((()=>[(0,a.Wm)(c.Z,{label:"Receipient"},{default:(0,a.w5)((()=>[(0,a.Wm)(d.Z,{modelValue:S.value,"onUpdate:modelValue":t[0]||(t[0]=e=>S.value=e),options:l.value,onChange:C},null,8,["modelValue","options"])])),_:1}),W.value.length?((0,a.wg)(),(0,a.iD)("div",b,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(W.value,(e=>((0,a.wg)(),(0,a.iD)("span",{key:e.receipient,class:"inline-block px-2 py-1 rounded-sm mr-2 text-sm dark:bg-gray-700 light:bg-gray-300"},[(0,a.Uk)((0,o.zw)(e.name)+" ",1),(0,a._)("span",null,[(0,a._)("button",{class:"inline-block bg-red-700 p-1 rounded-sm mr-2 text-white-700",onClick:t=>M(e.receipient)},"X",8,y)])])))),128))])):(0,a.kq)("",!0),(0,a.Wm)(m.Z),(0,a.Wm)(c.Z,{label:"Memo Title"},{default:(0,a.w5)((()=>[(0,a.Wm)(d.Z,{modelValue:(0,n.SU)(U).title,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,n.SU)(U).title=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(m.Z),(0,a.Wm)(c.Z,{label:"Date"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{modelValue:(0,n.SU)(U).date,"onUpdate:modelValue":t[2]||(t[2]=e=>(0,n.SU)(U).date=e),"auto-apply":"","alt-position":""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(m.Z),(0,a.Wm)(c.Z,{label:"Memo Content"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{ref_key:"editor",ref:h,content:(0,n.SU)(U).content,"onUpdate:content":t[3]||(t[3]=e=>(0,n.SU)(U).content=e),theme:"snow","content-type":"html",toolbar:"full"},null,8,["content"])])),_:1}),(0,a.Wm)(m.Z),(0,a.Wm)(v.Z,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p.Z,{type:"submit",color:"info",label:"Send"})])),_:1})])),_:1},8,["icon","onSubmit"])])),_:1})])}}};const k=h;var Z=k}}]);
//# sourceMappingURL=727.02b39f83.js.map