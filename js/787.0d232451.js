"use strict";(self["webpackChunkadmin_one_vue_tailwind"]=self["webpackChunkadmin_one_vue_tailwind"]||[]).push([[787],{5690:function(e,t,l){l.d(t,{Z:function(){return m}});l(7658);var a=l(6252),n=l(3577),i=l(2262);const s={class:"mb-6 last:mb-0"},c={key:0,class:"block font-bold mb-2"},o={key:1,class:"text-xs text-red-500 dark:text-red-400 mt-1"};var u={__name:"Field",props:{label:{type:String,default:null},help:{type:String,default:null}},setup(e){const t=(0,a.Rr)(),l=(0,a.Fl)((()=>{const e=[],l=t.default().length;return l>1&&e.push("grid grid-cols-1 gap-3"),2===l&&e.push("md:grid-cols-2"),e}));return(t,u)=>((0,a.wg)(),(0,a.iD)("div",s,[e.label?((0,a.wg)(),(0,a.iD)("label",c,(0,n.zw)(e.label),1)):(0,a.kq)("",!0),(0,a._)("div",{class:(0,n.C_)((0,i.SU)(l))},[(0,a.WI)(t.$slots,"default")],2),e.help?((0,a.wg)(),(0,a.iD)("div",o,(0,n.zw)(e.help[0].message),1)):(0,a.kq)("",!0)]))}};const r=u;var m=r},1787:function(e,t,l){l.r(t),l.d(t,{default:function(){return Z}});var a=l(6252),n=l(2262),i=l(3577),s=l(5317),c=l(7315),o=l(9890),u=l(5690),r=l(5693),m=l(7877),d=l(3002),f=l(2201),w=l(6373),g=l(1388),p=l(2213),h={__name:"SelfMemoAttachments",setup(e){const t=(0,f.yj)(),l=(0,n.iH)({}),h=(0,n.iH)([]),v=(0,n.iH)([]),Z=(0,d.pm)(),k=(0,n.qj)({file:null}),b=(0,n.iH)(t.params.memoId);function y(e){k.file=e.target.files||e.dataTransfer.files}async function _(){try{if(null===k.file)return;const e=new FormData;e.append("file",k.file[0]);const{message:t}=await m.Z.post(`/memos/${b.value}/attachments`,e);await C(t),Z.success(t)}catch(e){Z.error(e.message)}}async function W(e){try{const{data:t}=await m.Z.get(`/memos/${e}`);l.value=t}catch(t){Z.error(t.detail)}}function D(e){window.open(e)}async function C(e){try{const{data:t}=await m.Z.get(`/memos/${e}/attachments`);v.value=t}catch(t){Z.error(t.message)}}async function S(e){try{const{message:t}=await m.Z["delete"](`/memos/${b.value}/attachments/${e}`);await C(b.value),Z.success(t)}catch(t){Z.error(t.message)}}return(0,a.bv)((async()=>{await W(b.value),await C(b.value)})),(e,t)=>((0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(c.Z,null,{default:(0,a.w5)((()=>[(0,a.Wm)(o.Z,{title:"Memo Details",icon:(0,n.SU)(s.hjO)},{default:(0,a.w5)((()=>[h.value.length?((0,a.wg)(),(0,a.j4)(u.Z,{key:0,label:"Recipients"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(h.value,(e=>((0,a.wg)(),(0,a.iD)("span",{key:e.recipient,class:"inline-block px-2 py-1"},(0,i.zw)(e.user.fullName),1)))),128))])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(r.Z),(0,a.Wm)(u.Z,{label:"Memo Title"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(l.value.title),1)])),_:1}),(0,a.Wm)(r.Z),(0,a.Wm)(u.Z,{label:"Date"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(l.value.date),1)])),_:1}),(0,a.Wm)(r.Z),(0,a.Wm)(u.Z,{label:"Attachments"},{default:(0,a.w5)((()=>[(0,a.Wm)(p.Z,{type:"file",placeholder:"Enter the name of document",onChange:y})])),_:1}),(0,a.Wm)(u.Z,{label:"Attached Files"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(v.value,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id},[(0,a.Wm)(w.Z,{class:"justify-start lg:justify-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(g.Z,{color:"info",icon:(0,n.SU)(s.rgx),label:"View Attachment",onClick:t=>D(e.url)},null,8,["icon","onClick"]),(0,a.Wm)(g.Z,{color:"danger",icon:(0,n.SU)(s.QGK),label:"Delete Attachments",onClick:t=>S(e.id)},null,8,["icon","onClick"])])),_:2},1024)])))),128))])),_:1}),(0,a.Wm)(r.Z),(0,a.Wm)(r.Z),(0,a.Wm)(w.Z,null,{default:(0,a.w5)((()=>[(0,a.Wm)(g.Z,{color:"info",label:"Send",onClick:_})])),_:1})])),_:1},8,["icon"])])),_:1})]))}};const v=h;var Z=v}}]);
//# sourceMappingURL=787.0d232451.js.map